<style>body,html{margin:0;padding:0;background-color:#000}div{position:absolute;top:0;bottom:0;left:0;right:0}#canvas{width:100%;height:100%}</style><div><canvas id="canvas"></canvas></div><script>!function(){"use strict";const t="WIZARD WITH A SHOTGUN",i=6*Math.PI/180,s=20*Math.PI/180,h=45*Math.PI/180,e=70*Math.PI/180,l=72*Math.PI/180,r=80*Math.PI/180,n=90*Math.PI/180,o=360*Math.PI/180,f={e(){f.n=document.getElementById("canvas"),f.t=f.n.getContext("2d"),f.c(!0)},c(t){let i=window.devicePixelRatio,s=f.n.clientWidth,h=f.n.clientHeight,e=s*i,l=h*i;(t||f.n.width!==e||f.n.height!==l)&&(f.n.width=e,f.n.height=l,f.scale=(10*Math.max(e/480,l/270)|0)/10,f.width=Math.ceil(e/f.scale),f.height=Math.ceil(l/f.scale),f.i={s:f.width/2|0,h:f.height/2|0},f.clientWidth=s,f.clientHeight=h,f.t.imageSmoothingEnabled=!1),f.n.style.cursor="none"},o(){f.t.fillRect(0,0,f.width,f.height)}};function a(t){let i=Math.sqrt(t.x*t.x+t.y*t.y);return 0===i?{x:0,y:0,l:0}:{x:t.x/i,y:t.y/i,l:i}}function u(t,i){return a({x:i.x-t.x,y:i.y-t.y})}function c(t,i){return{x:Math.cos(t),y:Math.sin(t),l:i||1}}function M(t){let i=Math.atan2(t.y,t.x);return i<0&&(i+=o),i}function A(t){return{x:t.x*(t.l||1),y:t.y*(t.l||1)}}function y(...t){let i={x:0,y:0,l:1};for(let s of t)i.x+=s.x*(s.l||1),i.y+=s.y*(s.l||1);return i}function O(t,i,s,h){for(t>i&&([t,i]=[i,t]),s>h&&([s,h]=[h,s]);h>=i+o;)h-=o,s-=o;for(;s<=t-o;)s+=o,h+=o;const e=[Math.max(t,s),Math.min(i,h)];return e[0]>e[1]?void 0:e}function x(t){return{x:32*t.u,y:32*t.r}}function T(t){return{s:t.x+f.i.s-wt.A.M.x,h:t.y+f.i.h-wt.A.M.y}}function w(t){return{x:t.s-f.i.s+wt.A.M.x,y:t.h-f.i.h+wt.A.M.y}}function E(t,i,s){return t<i?i:t>s?s:t}function S(t,i){let s,h,e=i-t;return 0===e?(h=NaN,s=1/0):e>0?(h=1/e,s=(1-(t-(0|t)))*h):(h=-1/e,s=(t-(0|t))*h),{m:s,T:h}}function*N(t,i){yield*function*(t,i){let s=t.x/32,h=t.y/32,e=i.x/32,l=i.y/32,r=Math.abs((0|s)-(0|e))+Math.abs((0|h)-(0|l));if(yield{u:0|s,r:0|h,l:0},r>1){let t=s,i=h,n=0,o=Math.sign(e-s),f=Math.sign(l-h),a=S(s,e),u=S(h,l);for(let s=0;s<r-1;s++)a.m<u.m?(t+=o,n+=o,a.m+=a.T):(i+=f,n+=f,u.m+=u.T),yield{u:0|t,r:0|i,l:n}}r>0&&(yield{u:0|e,r:0|l,l:1})}(t,y(t,i))}function U(t,i,s,h){if(Math.max(t.x,i.x)+s<h[0].x||Math.min(t.x,i.x)-s>h[1].x||Math.max(t.y,i.y)+s<h[0].y||Math.min(t.y,i.y)-s>h[1].y)return;let e=i.x-t.x,l=i.y-t.y,r=0===e?0:1/e,n=0===l?0:1/l,o=1/0,f=1/0;if(t.x-s<h[0].x&&i.x+s>h[0].x){let i=(h[0].x-s-t.x)*r;if(i>=0&&i<=1){let s=l*i+t.y;if(s>=h[0].y&&s<=h[1].y)return{x:e*i+t.x,y:s,p:i,O:-1,S:0,U:h[0].x,N:s}}o=h[0].x}if(t.x+s>h[1].x&&i.x-s<h[1].x){let n=(t.x-(h[1].x+s))*-r;if(n>=0&&n<=1){let s=l*n+i.y;if(s>=h[0].y&&s<=h[1].y)return{x:e*n+t.x,y:s,p:n,O:1,S:0,U:h[1].x,N:s}}o=h[1].x}if(t.y-s<h[0].y&&i.y+s>h[0].y){let i=(h[0].y-s-t.y)*n;if(i>=0&&i<=1){let s=e*i+t.x;if(s>=h[0].x&&s<=h[1].x)return{x:s,y:l*i+t.y,p:i,O:0,S:-1,U:s,N:h[0].y}}f=h[0].y}if(t.y+s>h[1].y&&i.y-s<h[1].y){let i=(t.y-(h[1].y+s))*-n;if(i>=0&&i<=1){let s=e*i+t.x;if(s>=h[0].x&&s<=h[1].x)return{x:s,y:l*i+t.y,p:i,O:0,S:1,U:s,N:h[0].y}}f=h[1].y}if(o===1/0&&f===1/0)return;o!==1/0&&f===1/0&&(f=l>0?h[1].y:h[0].y),f!==1/0&&o===1/0&&(o=e>0?h[1].x:h[0].x);let a=1/s,u=Math.sqrt(e*e+l*l),c=o-t.x,M=f-t.y,A=Math.sqrt(c*c+M*M),y=Math.acos((c*e+M*l)/(u*A));if(A<s)return;if(0===y){let i=(A-s)/u;if(i>1||i<0)return;let h=i*e+t.x,r=i*l+t.y,n=c/A,a=M/A;return isNaN(h)?void 0:{x:h,y:r,p:i,O:n,S:a,U:o,N:f}}let O=Math.sin(y),x=O*A*a;if(Math.abs(x)>1)return;let T=Math.PI-Math.asin(x),w=Math.PI-y-T,E=s*Math.sin(w)/O/u;if(E>1||E<0)return;let S=E*e+t.x,N=E*l+i.y,U=(S-o)*a,d=(N-f)*a;return isNaN(S)?void 0:{x:S,y:N,p:E,O:U,S:d,U:o,N:f}}function d(t,i,s){return Array.from({length:i},()=>Array.from({length:t},s))}function H(t,i){if(wt.H){let s=wt.H.G;if(t<s.u||i<s.r||t>=s.u+s.w||i>=s.r+s.L)return!1}return!(t<0||i<0||t>=wt.k.w||i>=wt.k.L||!wt.k.k[i][t])}function b(t,i,s,h){return`rgba(${t},${i},${s},${h})`}function p(t,i){let s=document.createElement("canvas");s.width=t,s.height=i;let h=s.getContext("2d");return{n:s,t:h}}function G(t){return{x:32*(t.u+t.w/2),y:32*(t.r+t.L/2)}}function L(t,i,s){let h=E(Math.ceil(i/s*t.length),0,t.length),e=t.slice(0,h),l=t.indexOf(" ",h-1);return l<0&&(l=t.length),l-h>0&&(e+="#".repeat(l-h)),e}const C={R:[[0,0,15,15],[15,0,15,15],[30,0,15,15]],font:[[0,15,180,12]],v:[[0,27,5,5],[5,27,5,5],[10,27,5,5],[15,27,5,5]],W:[[0,32,9,9]],C:[[0,41,109,9],[109,41,109,9]],D:[[0,50,6,7],[6,50,6,7]],P:[[0,57,7,9],[7,57,7,9]],E:[[0,66,12,14],[12,66,12,14],[24,66,12,14]],K:[[0,80,21,32],[21,80,21,32],[42,80,21,32]],F:[[0,112,23,18],[23,112,23,18],[46,112,23,18],[69,112,23,18]],V:[[0,130,17,17],[17,130,17,17]],q:[[0,147,14,22],[14,147,14,22],[28,147,14,22],[42,147,14,22]],I:[[0,169,32,32]],g:[[0,201,4,4],[4,201,4,4]],B:"data:image/png;base64,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"},R={j(t){let i=new Image;i.onload=t,i.src=C.B,R.Q=i},e(){R.font=m(C.font[0]),R.Y=m(C.P[0]),R.J=m(C.P[1]),R.K=C.K.map(t=>m(t,{x:10,y:21})),R.F=C.F.map(t=>m(t,{x:11,y:14})),R.q=C.q.map(m),R.V=C.V.map(m),R.v=C.v.map(m),R.X=m(C.D[0]),R.Z=m(C.D[1]),R.C=C.C.map(m),R.C.push(K(function(t){let i=p(t.width,t.height);return i.t.drawImage(t,0,0),i.t.globalCompositeOperation="source-atop",i.t.fillStyle=b(255,255,0,.6),i.t.fillRect(0,0,t.width,t.height),i.n}(R.C[1]._))),R.W=C.W.map(m),R.E=C.E.map(m),R.I=C.I.map(m),R.I[1]=K(function(t){let i=p(32,32);return i.t.fillStyle=b(48,0,0,1),i.t.fillRect(0,0,32,32),i.t.globalAlpha=.6,i.t.globalCompositeOperation="hard-light",i.t.drawImage(t,0,0),D(i),i.n}(R.I[0]._)),R.$=K(function(t){let i=p(544,334);for(let s=0;s<334;s+=32)for(let h=0;h<544;h+=32)i.t.drawImage(t,h,s);return i.n}(R.I[0]._)),R.tt=K(function(){let t=p(500,500),i=t.t.createRadialGradient(250,250,0,250,250,250);return i.addColorStop(.3,b(0,0,0,0)),i.addColorStop(1,b(0,0,0,.9)),t.t.fillStyle=i,t.t.fillRect(0,0,500,500),t.n}());let t=C.g.map(m);R.g=K(function(t){let i=p(36,36);for(let s=0;s<36;s+=4)i.t.drawImage(t,s,0),i.t.drawImage(t,s,32),i.t.drawImage(t,0,s),i.t.drawImage(t,32,s);return D(i),i.n}(t[0]._)),R.it=K(function(t,i){let s=p(36,36);for(let t=0;t<36;t+=4)s.t.drawImage(i,t,0),s.t.drawImage(i,t,32),s.t.drawImage(i,0,t),s.t.drawImage(i,32,t);return s.t.drawImage(t,0,0),s.t.drawImage(t,32,0),s.t.drawImage(t,0,32),s.t.drawImage(t,32,32),D(s),s.n}(t[0]._,t[1]._));let i=C.R.map(m);R.st=K(function(t,i){let s=p(130,45);return s.t.drawImage(W(t).n,0,5),s.t.drawImage(i,5,0),s.n}(i[0]._,i[2]._)),R.ht=K(W(i[1]._).n)},et(t,i,s,h){t.drawImage(i._,s-i.mt.x,h-i.mt.y)},rt(t,i,s){let{s:h,h:e}=this.nt(t,i);s?(f.t.save(),f.t.translate(h+t.mt.x,e+t.mt.y),f.t.rotate(s),f.t.drawImage(t._,-t.mt.x,-t.mt.y),f.t.restore()):f.t.drawImage(t._,h,e)},nt:(t,i)=>({s:i.x-t.mt.x-wt.A.M.x+f.i.s,h:i.y-t.mt.y-wt.A.M.y+f.i.h})};function m(t,i){return K(function(t,i,s,h){const e=R.Q,l=p(s,h);return l.t.drawImage(e,t,i,s,h,0,0,s,h),l.n}(...t),i)}function K(t,i){let s=t.width,h=t.height;return{_:t,mt:i&&i.x?i:{x:s/2|0,y:h/2|0}}}function D(t){t.t.globalCompositeOperation="source-atop";for(let i=0;i<36;i++)for(let s=0;s<36;s++)t.t.fillStyle=b(0,0,0,.6*Math.random()),t.t.fillRect(s,i,1,1)}function W(t){let i=p(130,40);for(let s=0;s<40;s+=5)for(let h=0;h<130;h+=5){let e=0===h?0:125===h?10:5,l=0===s?0:35===s?10:5;i.t.drawImage(t,e,l,5,5,h,s,5,5)}return i}const F={e(){F.map={KeyW:z.lt.ot,KeyA:z.lt.at,KeyS:z.lt.ft,KeyD:z.lt.ut,ArrowUp:z.lt.ot,ArrowLeft:z.lt.at,ArrowDown:z.lt.ft,ArrowRight:z.lt.ut,Escape:z.lt.ct},F.Mt=[{x:0,y:0,l:0},{x:0,y:-n,l:1},{x:0,y:n,l:1},{x:0,y:0,l:0},{x:-n,y:0,l:1},{x:-h,y:-h,l:1},{x:-h,y:h,l:1},{x:-n,y:0,l:1},{x:n,y:0,l:1},{x:h,y:-h,l:1},{x:h,y:h,l:1},{x:n,y:0,l:1},{x:0,y:0,l:0},{x:0,y:-n,l:1},{x:0,y:n,l:1},{x:0,y:0,l:0}],F.yt=[],window.addEventListener("keydown",t=>{let i=F.map[t.code];i&&(F.yt[i]=!0)}),window.addEventListener("keyup",t=>{let i=F.map[t.code];i&&(F.yt[i]=!1)}),F.$i()},_i(){let t=(F.yt[z.lt.ot]?1:0)+(F.yt[z.lt.ft]?2:0)+(F.yt[z.lt.at]?4:0)+(F.yt[z.lt.ut]?8:0);F.ts=F.Mt[t]},$i(){F.ts=F.Mt[0];for(let t of Object.values(z.lt))F.yt[t]=!1}},P=(...t)=>B(I(...t)),B=(...t)=>{let i=V.createBufferSource(),s=V.createBuffer(t.length,t[0].length,j);return t.map((t,i)=>s.getChannelData(i).set(t)),i.buffer=s,i.connect(P.At),i.start(),i},I=(t=1,i=.05,s=220,h=0,e=0,l=.1,r=0,n=1,o=0,f=0,a=0,u=0,c=0,M=0,A=0,y=0,O=0,x=1,T=0,w=0)=>{let E,S,N=2*Math.PI,U=o*=500*N/j**2,d=(0<A?1:-1)*N/4,H=s*=(1+2*i*Math.random()-i)*N/j,b=[],p=0,G=0,L=0,C=1,R=0,m=0,K=0;for(f*=500*N/j**3,A*=N/j,a*=N/j,u*=j,c=j*c|0,S=(h=99+j*h)+(T*=j)+(e*=j)+(l*=j)+(O*=j)|0;L<S;b[L++]=K)++m%(100*y|0)||(K=r?1<r?2<r?3<r?Math.sin((p%N)**3):Math.max(Math.min(Math.tan(p),1),-1):1-(2*p/N%2+2)%2:1-4*Math.abs(Math.round(p/N)-p/N):Math.sin(p),K=(c?1-w+w*Math.sin(2*Math.PI*L/c):1)*(0<K?1:-1)*Math.abs(K)**n*t*v*(L<h?L/h:L<h+T?1-(L-h)/T*(1-x):L<h+T+e?x:L<S-O?(S-L-O)/l*x:0),K=O?K/2+(O>L?0:(L<S-O?1:(S-L)/O)*b[L-O|0]/2):K),E=(s+=o+=f)*Math.sin(G*A-d),p+=E-E*M*(1-1e9*(Math.sin(L)+1)%2),G+=E-E*M*(1-1e9*(Math.sin(L)**2+1)%2),C&&++C>u&&(s+=a,H+=a,C=0),!c||++R%c||(s=H,o=U,C=C||1);return b},v=.3,j=44100,V=new(top.AudioContext||webkitAudioContext);P.At=V.destination;const Y=[[[1.3,0,23,,,.2,3,5],[1.5,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.7,0,2100,,,.2,3,3,,,-400,,,2],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1]],[[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,],[,.6,,,,,13,,18,,19,,,,,,,,19,,18,,,,16,,,,13,,,,,,,,,,13,,18,,19,,,,,,,,18,19,18,,,,13,14,13,,16,,18,,19,,],[3,-1,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,13,13,13,13]],[[,-.5,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,,,13,,,,14,,,,],[1,.3,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,,,13,,13,,13,,13,,13,,],[2,1,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,13,,,,,,,,,,,,]]],[1,1,0,0,0,0,1,0],,],k={e(){k.wt=!1,k.t=V,k.xt=k.t.createGain(),k.xt.connect(k.t.destination),P.At=k.xt,k.dt=[,.01,140,.01,.02,.45,4,2.42,.1,-.1,,,,1.2,,.3,.04,.8,.02],k.E=[,,1233,,.01,.2,1,1.43,,,539,.1,,,,,,.51,.03,.01],k.Tt=[,,68,.01,,.14,1,1.53,7.5,.1,50,.02,-.01,-.2,.1,.2,,.47,.01],k.pt=[,,391,,.19,.01,2,.54,-4,20,,,,,,,.02,.9],k.Et=[,,970,.12,.25,.35,,.39,8.1,,10,.1,.2,,.1,,,.6,.09,.13],k.Ot=[,,454,.06,.86,.71,2,.63,-.7,1.7,-83,.09,.27,.3,.2,,.18,.95,.02,.02],k.bt=((t,i,s,h=125)=>{let e,l,r,n,o,f,a,u,c,M,A,y,O,x,T,w,E=[],S=[],N=[],U=0,d=1,H={},b=j/h*60>>2;for(;d;U++)E=[d=u=A=O=0],s.map((h,A)=>{for(a=i[h][U]||[0,0,0],d|=!!i[h][U],T=O+(i[h][0].length-2-!u)*b,l=2,n=O;l<a.length+(A==s.length-1);u=++l){for(o=a[l],c=M!=(a[0]||0)|o|0,r=0;r<b&&u;r++>b-99&&c?y+=(y<1)/99:0)f=(1-y)*E[x++]/2||0,S[n]=(S[n]||0)+f*w-f,N[n]=(N[n++]||0)+f*w+f;o&&(y=o%1,w=a[1]||0,(o|=0)&&(E=H[[M=a[x=0]||0,o]]=H[[M,o]]||(e=[...t[M]],e[2]*=2**((o-12)/12),I(...e))))}O=T});return[S,N]})(...Y),localStorage[`OS13kMusic,${t} - Oblique Mystique`]=JSON.stringify(Y)},_i(){k.wt&&(k.St||(k.Ut=B(...k.bt),k.Ut.loop=!0,k.St=!0))},is(t){k.wt&&P(...t)},ss(){k.xt.gain.linearRampToValueAtTime(0,k.t.currentTime+1)},hs(){k.xt.gain.linearRampToValueAtTime(1,k.t.currentTime+1)}},q={e(){this.map=[],this.map[0]=z.lt.Nt,this.map[2]=z.lt.Ht,this.yt=[],window.addEventListener("mousemove",t=>{this.Gt||(this.Gt={}),this.Gt.s=t.clientX*f.width/f.clientWidth|0,this.Gt.h=t.clientY*f.height/f.clientHeight|0}),window.addEventListener("mouseout",()=>{this.Gt=void 0}),window.addEventListener("mousedown",t=>{let i=this.map[t.button];i&&(this.yt[i]=!0),k.wt=!0}),window.addEventListener("mouseup",t=>{let i=this.map[t.button];i&&(this.yt[i]=!1)}),window.addEventListener("click",t=>{t.preventDefault()}),window.addEventListener("contextmenu",t=>{let i=this.map[t.button];i&&(this.yt[i]=!0),this.Lt=2,t.preventDefault()}),q.$i()},_i(){this.Lt&&(this.Lt--,0===this.Lt&&(this.yt[z.lt.Ht]=!1))},$i(){this.Gt=void 0;for(let t of Object.values(z.lt))this.yt[t]=!1}},z={lt:{ot:11,ft:12,at:13,ut:14,Nt:21,Ht:30,ct:96,kt:97,Rt:98},e(){this.ts={x:0,y:0,l:0},this.es={},this.vt={},this.yt={},this.Wt={},F.e(),q.e()},_i(){F._i(),q._i();for(let t of Object.values(z.lt)){let i=q.yt[t]||F.yt[t];this.es[t]=!this.yt[t]&&i,this.vt[t]=this.yt[t]&&!i,this.es[t]?this.Wt[t]=1:this.yt[t]&&i&&this.Wt[t]++,this.yt[t]=i}this.Gt=q.Gt,this.ts=F.ts},Ct(t){},Dt(t){}},g=[41,61,[[24,1,5,4,5,3],[13,4,7,3,6,3],[33,5,6,5,7,4],[23,7,5,5,8,2],[11,8,5,4,9,2],[29,11,3,3,10,1],[18,12,4,7,11,3],[35,12,5,5,12,5],[24,13,3,5,13,0],[7,14,3,5,14,0],[11,14,5,5,15,1],[3,16,1,1,1],[23,20,5,5,16,3],[33,20,6,6,17,3],[11,21,4,4,18,2],[18,21,3,3,19,1],[18,26,5,4,20,3],[27,26,5,4,21,0],[10,27,6,4,22,3],[24,31,10,7,23,4],[12,32,9,4,24,5],[10,51,12,9,25,0]],[231,41,29,4,13,1,27,10,1,1,1,28,1,1,1,1,8,41,7,41,17,12,29,30,1,1,26,12,1,1,1,1,17,1,7,3,1,8,1,2,1,1,4,6,1,12,1,1,2,9,1,1,1,1,24,2,1,1,10,1,1,21,4,1,1,23,6,6,5,24,6,11,41,1,1,30,1,6,1,1,40,41,24,12,5,24,12,40,1,41,1,1,75,10,25,6]],J={Pt:t=>t.reduce((t,i)=>(t[i.Kt]=i,t),{}),Ft(t,i){let s=d(t[0].length,t.length,()=>0);for(let h=0;h<s.length;h++)for(let e=0;e<s[0].length;e++)if(t[h][e]){let l=i[t[h][e]];s[h][e]=(t[h-1][e]?0:1)|(t[h][e+1]?0:2)|(t[h+1][e]?0:4)|(t[h][e-1]?0:8),l&&(s[h][e]|=(t[h-1][e]&&h===l.r?16:0)|(t[h][e+1]&&e===l.u+l.w-1?32:0)|(t[h+1][e]&&h===l.r+l.L-1?64:0)|(t[h][e-1]&&e===l.u?128:0))}return s},Vt(){let t=d(g[0],g[1],()=>0),i=g[2].map(t=>({u:t[0],r:t[1],w:t[2],L:t[3],Kt:t[4],ls:t[5]})),s=0;for(let i of g[3])s+=i,t[s/g[0]|0][s%g[0]]=3;for(let s of i)for(let i=0;i<s.L;i++)for(let h=0;h<s.w;h++)t[s.r+i][s.u+h]=s.Kt;let h=this.Pt(i);return{k:t,g:this.Ft(t,h),qt:h,w:g[0],L:g[1]}}},Q={10:0,32:3,33:3,39:2,44:3,46:3,73:2},X={},Z={e(){Z.It=R.font._;let t=[[108,R.Y],[114,R.J]];for(let i of t)X[i[0]]=i[1],Q[i[0]]=i[1]._.width+1;Z.gt=$(Z.It,b(0,0,0,1)),Z.Bt=$(Z.It,b(90,20,90,.15)),Z.blue=$(Z.It,b(200,40,220,1)),Z.jt=$(Z.It,b(240,50,200,.2)),Z.tt=$(Z.It,b(240,240,255,.25)),Z.red=$(Z.It,b(240,50,50,1))},Yt(t,i,s,h,e=1,l=Z.It,r){for(let n=0;n<i.length;n++){let o=i.charCodeAt(n);if(X[o])t.drawImage(X[o]._,s,h-(X[o]._.height-5)/2);else{let i=4*(o-32);r&&t.drawImage(r,i%180,6*(i/180|0),3,5,s+1,h+1,3*e,5*e),t.drawImage(l,i%180,6*(i/180|0),3,5,s,h,3*e,5*e)}s+=(Q[o]||4)*e}},Jt(t,i,s,h,e,l,r=1,n=Z.It,o){let f=s,a=h,u=i.split(" ");for(let i of u){for(;"\n"===i[0];)i=i.slice(1),f=s,a+=7*r;let h=Z.zt(i,r);f+h-s>e&&(f=s,a+=7*r),Z.Yt(t,i,f,a,r,n,o),f+=h+(Q[32]||4)}},zt:(t,i)=>t.split("").reduce((t,i)=>t+(Q[i.charCodeAt(0)]||4),0)*i};function $(t,i){let s=p(t.width,t.height);return s.t.fillStyle=i,s.t.fillRect(0,0,t.width,t.height),s.t.globalCompositeOperation="destination-in",s.t.drawImage(t,0,0),s.n}class _{constructor(t,i,s){this.frames=t,this.Qt=i,this.Xt=s,this.Zt=[],this._t=[];var h=t/2;for(let t=0;t<h;t++)this.Zt.push(2*Math.random()-1),this._t.push(2*Math.random()-1);this.rs=-1}_i(){if(this.rs++,this.rs>=this.frames)return!1;let t=this.rs/2,i=0|t,s=i+1,h=1-this.rs/this.frames;return this.x=this.Qt*h*(this.Zt[i]+(t-i)*(this.Zt[s]-this.Zt[i])),this.y=this.Xt*h*(this._t[i]+(t-i)*(this._t[s]-this._t[i])),!0}}class tt{constructor(t,i){this.M={...t},this.angle=i,this.$t=r,this.p=-1,this.d=6,this.range=55,wt.ti.push(new _(6,6,6))}ii(){if(++this.p===this.d&&(this.si=!0),3===this.p){let t=wt.ns.filter(t=>t.hi&&t!==wt.K);for(let i of t){let t=u(this.M,i.M);if(t.l>=this.range+i.ei)continue;let s=u(this.M,{x:i.M.x-t.y*i.ei,y:i.M.y+t.x*i.ei}),h=u(this.M,{x:i.M.x+t.y*i.ei,y:i.M.y-t.x*i.ei}),e=[M(s),M(h)];if(!O(e[0],e[1],this.angle-this.$t/2,this.angle+this.$t/2))continue;let l=[];y(this.M,c(e[0],t.l));for(let i of N(this.M,c(e[0],t.l)))if(!H(i.u,i.r)){l.push(i);break}for(let i of N(this.M,c(e[1],t.l)))if(!H(i.u,i.r)){l.push(i);break}l.length<2&&i.pt.push({ri:100,ni:t,oi:t.l>32?5:10})}}}li(){}}class it{constructor(t){this.p=-1,this.d=t,this.z=101}ii(){++this.p===this.d&&(this.si=!0)}li(){for(let t=0;t<wt.K.ai;t++){let i=t*this.d/wt.K.ai,s=i-3|0;if(this.p===s&&k.is(k.Tt),this.p>=s){let s=Math.min(10,10+this.p-i);f.t.globalAlpha=Math.min(1,1+(this.p-i)/10),f.t.drawImage(R.Z._,15+6*t,s),f.t.globalAlpha=1}}}}class st{constructor(t,i,s){this.M={...t},this.angle=i,this.fi=A(c(this.angle,s?8:5)),this.a=h,this.ui=!0,this.f=s,this.ci=!0,this.ei=1,this.r=0,this.p=-1,this.d=0===this.f?45:70}ii(){++this.p===this.d&&(this.si=!0),this.fi.x*=.9,this.fi.y*=.9,this.a*=.95,this.r+=this.a}li(){R.rt(R.v[this.f],this.M,this.r)}}st.pt=t=>st.Mi(t,8,()=>0),st.yi=t=>st.Mi(t,16,()=>4*Math.random()|0),st.Mi=(t,i,s)=>{let e=t.Ai?M(t.Ai.ni):Math.random()*o;for(let l=0;l<i*(wt.Ot?2:1);l++){let i=Math.random()*t.ei,l=y(t.M,c(Math.random()*o,i));wt.ns.push(new st(l,e+Math.random()*n-h,s()))}};class ht{constructor(t){this.M={...t},this.p=-1,this.d=40,this.z=101}ii(){++this.p===this.d&&(this.si=!0)}li(){let t=["s","t","u","v","w"],i=T(this.M);f.t.globalAlpha=1-this.p/this.d;for(let s=0;s<5;s++){let h=A(c(l*s+this.p/36,12));Z.Yt(f.t,t[s],i.s+h.x+2*Math.random()-2,i.h+h.y+2*Math.random()-3,1,Z.blue,Z.jt)}f.t.globalAlpha=1}}class et{constructor(t,i){this.start=t,this.ri=i,this.p=-1,this.d=20,this.z=101,this.y=5,this.fi=-.7,this.wi=.09}ii(){++this.p===this.d&&(this.si=!0),this.y+=this.fi,this.fi+=this.wi}li(){let t=this.start-this.ri+8;this.p>15&&(f.t.globalAlpha=1-.1*this.p),f.t.drawImage(R.C[2]._,t,3,this.ri,3,t+2,this.y,this.ri,3),f.t.globalAlpha=1}}class lt{constructor(t){this.M={...t},this.hi=200,this.pt=[],this.fi={x:0,y:0},this.xi={x:0,y:-1,l:0},this.ei=8,this.di=.5,this.mi=0,this.os=103,this.Ti=!0,wt.pi[6]=!0}ii(){let t=this.xi=u(this.M,wt.K.M);this.Ei=M(this.xi),103===this.os?(t.l<38&&Math.random()<.05&&wt.rs>this.mi+60&&(this.os=202,this.frames=24),t.l=E(t.l,0,.75),this.fi={x:(this.fi.x+t.x*t.l)/2,y:(this.fi.y+t.y*t.l)/2}):202===this.os?(0==this.frames--&&(this.os=201,this.frames=12),this.fi={x:0,y:0}):201===this.os?(0==this.frames--&&(this.os=103,this.mi=wt.rs),1===this.frames&&t.l<23&&wt.K.pt.push({ri:12,ni:t,oi:5}),t.l=E(t.l,0,3),this.fi={x:t.x*t.l,y:t.y*t.l}):106===this.os&&(this.si=!0,st.yi(this),wt.ns.push(new at(this.M,1)),wt.ns.push(new at(this.M,2)))}li(){let t=R.q[(wt.rs/12|0)%2];202===this.os&&(t=R.q[2]),201===this.os&&(t=R.q[3]),R.rt(t,this.M,this.Ei+n)}}class rt{constructor(t){this.M={...t},this.hi=100,this.pt=[],this.ei=3,this.di=1,this.ci=!0,this.Ti=!0,wt.pi[7]=!0;let i=Math.random()*o;i%n<s&&(i+=s),i%n>e&&(i-=s),this.xi=c(i),this.fi=this.xi,this.os=103}ii(){if(103===this.os){let t=a(this.fi);t.l=(t.l+2.5)/2,this.fi=A(t);let i=u(this.M,wt.K.M);i.l<=this.ei+wt.K.ei&&wt.K.pt.push({ri:5,ni:i,oi:3})}else 106===this.os&&(this.si=!0,st.yi(this),wt.ns.push(new at(this.M,1)),wt.ns.push(new at(this.M,2)))}li(){R.rt(R.V[0],this.M,wt.rs/5),R.rt(R.V[1],this.M)}}const nt={Oi(){if(wt.K.fs>=404&&!wt.Ot){nt.rs=0,wt.Ot=!0,wt.K.M=G(wt.k.qt[25]),wt.H=!1;let t=wt.ns.filter(t=>t.Ti);for(let i of t)i.os=106;k.is(k.Ot)}else if(wt.Ot){nt.rs++,10===nt.rs&&(wt.ns.push(new ht(wt.K.M)),wt.ti.push(new _(20,20,90)));let t=wt.ns.filter(t=>t.Ti);if(nt.rs%30==0&&t.length<25){let t=y(wt.K.M,c(Math.random()*o,48)),i=new(0,[lt,lt,rt][3*Math.random()|0])(t);wt.ns.push(i),wt.ns.push(new ht(t))}}}},ot={li(){let t=E(wt.K.hi,0,100);f.t.drawImage(R.C[0]._,2,2),f.t.drawImage(R.C[1]._,0,0,t+8,8,2,2,t+8,8);let i=R.Z;for(let t=0;t<wt.K.ai;t++)t+1>wt.K.bi&&(i=R.X),f.t.drawImage(i._,15+6*t,10);let s=wt.K.fs;wt.Ot&&(s=nt.rs>240?666:404),(s>0||wt.K.Si>0)&&(ot.Ui>0&&ot.Ui<30?f.t.globalAlpha=1-ot.Ui++/60:f.t.globalAlpha=.5,f.t.drawImage(R.E[1]._,f.width-47,2),f.t.globalAlpha=1,f.t.drawImage(R.E[0]._,f.width-47,2),Z.Yt(f.t,"x"+(""+s).padStart(3,"0"),f.width-34,4,2,666===s?Z.red:Z.blue,Z.jt)),ot.Ni(),z.Gt&&(wt.R&&(f.t.globalAlpha=.5),R.rt(R.W[0],w(z.Gt),wt.rs/72),f.t.globalAlpha=1)},Ni(){let t=ot.Hi();if(t){let i=u(wt.K.M,t.M),s=M(i);if(i.l=E(i.l/2,16,f.height/2-5),i.l>64){let t=y(wt.K.M,i);f.t.globalAlpha=.2*Math.sin(wt.rs/20)+.8,R.rt(R.E[2],t,s+n),f.t.globalAlpha=1}}},Hi(){let t=wt.ns.filter(t=>t.E),i=wt.K.M;return t.sort((t,s)=>(t.M.x-i.x)**2+(t.M.y-i.y)**2-((s.M.x-i.x)**2+(s.M.y-i.y)**2)),t[0]}};class ft{constructor(t,i){this.p=-1,this.d=40,this.z=101,this.a=R.nt(R.E[0],t),this.a.s-=R.E[0].mt.x,this.a.h-=R.E[0].mt.y,this.b={s:f.width-47,h:2},this.ri=i}ii(){10===this.p&&k.is(k.E),this.p%8==0&&(wt.K.hi=E(wt.K.hi+1,0,100)),++this.p===this.d&&(this.si=!0,wt.K.fs+=this.ri,ot.Ui=1)}li(){let t={s:(this.b.s-this.a.s)*this.p/this.d+this.a.s,h:(this.b.h-this.a.h)*this.p/this.d+this.a.h};f.t.drawImage(R.E[0]._,t.s,t.h)}}class at{constructor(t,i){this.M={...t},this.ri=i,this.angle=Math.random()*o,this.fi=A(c(this.angle,3*Math.random()+1)),this.Gi=60*Math.random()|0,this.ei=3,this.ui=!0,this.E=!0,wt.Ot&&(this.si=!0)}ii(){this.fi.x*=.95,this.fi.y*=.95,u(this.M,wt.K.M).l<wt.K.ei+this.ei+2&&106!==wt.K.os&&107!==wt.K.os&&(this.si=!0,wt.ns.push(new ft(this.M,this.ri)))}li(){let t={x:this.M.x,y:this.M.y+2*Math.sin((wt.rs+this.Gi)/30)};R.rt(R.E[1],t),R.rt(R.E[0],t)}}class ut{constructor(){this.M=G(wt.k.qt[1]),this.fi={x:0,y:0},this.hi=100,this.pt=[],this.as=[],this.xi={x:0,y:-1,l:0},this.ei=11,this.bi=4,this.ai=4,this.Li=!1,this.di=3,this.fs=0,this.Si=0,this.os=107,this.frames=29}ii(){if(this.as.unshift({...this.M}),this.as.splice(50),104===this.os)wt.R&&wt.R.ki?this.fi={x:0,y:0}:this.Ri(1),wt.R&&wt.R.vi||z.es[z.lt.Nt]&&(0===this.bi?this.us():this.Wi()),wt.R&&wt.R.Ci||z.es[z.lt.Ht]&&this.bi<this.ai&&this.us(),this.hi<75&&(wt.pi[8]=!0),this.Si>0&&(wt.pi[5]=!0);else if(201===this.os)this.Ri(1),--this.frames<=0&&(0===this.bi?this.us(!0):this.os=104);else if(202===this.os)this.Ri(this.Li?.5:2),--this.frames<=0&&(this.bi=this.ai,this.os=104);else if(106===this.os){if(wt.Ot){this.os=104,wt.ti.push(new _(15,15,25));let t=wt.ns.filter(t=>t.Ti);for(let i of t)Math.random()<.5&&(i.os=106)}else this.os=107,this.frames=120,this.Di();this.hi=100,this.Si++,st.yi(this),st.yi(this)}else if(107===this.os){if(wt.Pi&&this.frames--,30===this.frames&&(this.M=G(wt.k.qt[1]),this.fi={x:0,y:0},wt.H)){for(let t of wt.H.Ki)t.si=!0;wt.H=!1}0===this.frames&&(this.os=104,wt.ns.push(new ht(this.M)),wt.pi[0]=wt.pi[1]=wt.pi[2]=wt.pi[3]=wt.pi[4]=!0)}}Ri(t){z.Gt&&(this.xi=u(this.M,w(z.Gt)),this.Ei=M(this.xi)-i);let s=z.ts.x*z.ts.l*1.7*t,h=z.ts.y*z.ts.l*1.7*t;this.fi.x=(this.fi.x+s)/2,this.fi.y=(this.fi.y+h)/2}Wi(){k.is(k.dt),this.os=201,this.frames=10,this.bi--;let t={x:this.M.x+8*this.xi.x-3*this.xi.y,y:this.M.y+8*this.xi.y+3*this.xi.x};wt.ns.push(new tt(t,this.Ei)),this.fi=A({...a(this.xi),l:-1})}us(t){this.Li=t,this.os=202,this.frames=20,this.bi=0,wt.ns.push(new it(this.frames))}li(){if(106===this.os||107===this.os)return;let t,i=R.K[0],s=(wt.rs/30|0)%2;201===this.os&&this.frames>=2&&(i=R.K[1],t=R.F[6-this.frames]);let h=202!==this.os||this.Li?0:15;for(let e=Math.min(h,history.length);e>=0;e--){let{s:h,h:l}=R.nt(i,this.as[e]);f.t.save(),f.t.globalAlpha=0===e?1:.5,f.t.translate(h+i.mt.x,l+i.mt.y),f.t.rotate(this.Ei+n),t&&f.t.drawImage(R.K[0]._,12,0,9,32,12-i.mt.x,2-i.mt.y,9,32),f.t.drawImage(i._,-i.mt.x,-i.mt.y),f.t.drawImage(R.K[2]._,-i.mt.x,-i.mt.y+s),t&&(201===this.os&&this.frames>=2&&(i=R.K[1],t=R.F[6-this.frames]),f.t.drawImage(t._,3-t.mt.x,-20-t.mt.y)),f.t.restore()}}Di(){let t=Math.min(this.fs,7),i=this.fs/t|0,s=this.fs-i*t;for(let h=0;h<t;h++)wt.ns.push(new at(this.M,i+s)),s=0;this.fs=0}}const ct=[[[lt,1,1,1,1,1]],[[rt,1,1,1,1,1]],[[lt,5,,,,1,1,1],[rt,,,,,3,,3]],[[lt,,1,,1,,1],[rt,2,,2,,2,,3]],[[lt,20,,,,,,,],[rt,,,,,1,1,1,1]],[[lt,,,,,,,6],[rt,3,,3,,3,,,3]]],Mt={Oi(){if(wt.H){let t=wt.H.Ki.filter(t=>!t.si).length;if(0===wt.H.Fi.length)0===t&&(wt.Vi[wt.H.G.Kt]=!0,wt.H=!1);else{let i=wt.H.Fi[0];wt.rs>=wt.H.start+i[1]?Mt.qi(i)&&wt.H.Fi.shift():0===t&&(i[1]-=6)}}else{let i={u:(t=wt.K.M).x/32|0,r:t.y/32|0},s=wt.k.qt[wt.k.k[i.r][i.u]];s&&s.Kt>=5&&!wt.Vi[s.Kt]&&!wt.Ot&&i.u>s.u&&i.r>s.r&&i.u<s.u+s.w-1&&i.r<s.r+s.L-1&&(wt.ti.push(new _(20,20,20)),wt.H={G:s,Ki:[],start:wt.rs,Fi:Mt.Ii(ct[s.ls])},k.is(k.Et))}var t},Ii(t){let i=[];for(let s of t){let t=s[0];for(let h=1;h<s.length;h++)for(let e=0;e<s[h];e++)i.push([t,30*(h-1)+10*e])}return i.sort((t,i)=>t[1]-i[1]),i},qi(t){let i={x:(Math.random()*(32*wt.H.G.w-32)|0)+32*wt.H.G.u+16,y:(Math.random()*(32*wt.H.G.L-32)|0)+32*wt.H.G.r+16};if(u(wt.K.M,i).l>48){let s=new t[0](i);return wt.ns.push(s),wt.H.Ki.push(s),wt.ns.push(new ht(i)),s}}},At={Oi(t){let i=t.filter(t=>t.M&&t.fi&&!t.si);for(let t=0;t<5;t++){for(let t=0;t<i.length-1;t++)for(let s=t+1;s<i.length;s++)At.gi(i[t],i[s]);for(let t of i)At.Bi(t)}for(let t of i)t.M.x+=t.fi.x,t.M.y+=t.fi.y},gi(t,i){if(t.ui||i.ui)return;let s=function(t,i,s,h,e,l){[s,l]=[A(s),A(l)];let r=u({x:t.x+s.x,y:t.y+s.y},{x:h.x+l.x,y:h.y+l.y});if(r.l<i+e)return{O:r.x,S:r.y,l:i+e-r.l}}(t.M,t.ei,t.fi,i.M,i.ei,i.fi);if(s)if(t.ci&&i.ci)t.fi.x=-s.O*s.l,t.fi.y=-s.S*s.l,i.fi.x=s.O*s.l,i.fi.y=s.S*s.l;else{let h=a(t.fi).l+i.di,e=a(i.fi).l+t.di,l=t.ci?.1:1,r=i.ci?.1:1;t.fi.x-=s.O*s.l*l*h/(h+e),t.fi.y-=s.S*s.l*l*h/(h+e),i.fi.x+=s.O*s.l*r*e/(h+e),i.fi.y+=s.S*s.l*r*e/(h+e)}},Bi(t){if(!t.ji)for(let i of function*(t,i,s){yield*function*(t,i,s){let h=[{x:Math.min(t.x,i.x)-s,y:Math.min(t.y,i.y)-s},{x:Math.max(t.x,i.x)+s,y:Math.max(t.y,i.y)+s}];yield*function*(t){for(let i=t[0].y/32|0;32*i<t[1].y;i++)for(let s=t[0].x/32|0;32*s<t[1].x;s++)yield{u:s,r:i}}(h)}(t,{x:t.x+i.x,y:t.y+i.y},s)}(t.M,t.fi,t.ei))if(!H(i.u,i.r)){let s=[x(i),x({u:i.u+1,r:i.r+1})],h=U(t.M,{x:t.M.x+t.fi.x,y:t.M.y+t.fi.y},t.ei,s);h&&(t.ci?0===h.O?t.fi.y=-t.fi.y:0===h.S?t.fi.x=-t.fi.x:(t.fi.x+=h.O,t.fi.y+=h.S):0===h.O?t.fi.y=h.y-t.M.y:0===h.S?t.fi.x=h.x-t.M.x:(t.fi.x+=h.O,t.fi.y+=h.S))}}},yt={Oi(t){let i=!1;for(let s of t)if(s.hi){if(s.pt.length>0){if(106!==s.os&&107!==s.os)for(let t of s.pt)s===wt.K&&wt.ns.push(new et(s.hi,t.ri)),s.hi-=t.ri,t.ni.l=t.oi,s.fi=y(s.fi,t.ni),s.Ai=t,st.pt(s),i=!0;s.pt=[]}s.hi<=0&&106!==s.os&&(s.os=106)}i&&k.is(k.pt)}};class Ot{constructor(t){let i=Ot.Yi[t];this.Ji=t,this.cs=i.cs,this.zi=i.zi,this.Ci=i.Ci,this.vi=i.vi,this.zi&&(this.ki=this.vi=this.Ci=!0),this.p=0,this.d=this.zi?100:40,this.z=102,wt.R=this}ii(){this.p<this.d&&this.p++,wt.Qi[this.Ji]=!0,2===this.Ji?z.ts.l>0&&(this.si=!0,wt.R=!1):4===this.Ji?z.es[z.lt.Ht]&&(this.si=!0,wt.R=!1):z.es[z.lt.Nt]&&(this.p<this.d?this.p=this.d:(this.si=!0,wt.R=!1))}li(){let t=R.st,i=f.i.s+5,s=f.i.h+8,h=i+8,e=s+12;this.zi||(t=R.ht,i=f.i.s-R.ht._.width/2,s=f.height-R.ht._.height-8,h=i+5,e=s+5),f.t.drawImage(t._,i,s),Z.Jt(f.t,L(this.cs,this.p,this.d),h,e,115,50,1,Z.gt,Z.Bt)}}Ot.Yi=[{cs:"SHOGGOTH'S ARMPIT! THE SHOTGUN ARCANA IS SCATTERED ALL OVER THIS DUNGEON!",zi:!0},{cs:"HELP ME FIND ALL 404 MISSING PAGES AND GET ME OUT OF HERE!",zi:!0},{cs:"USE WASD OR mnop TO MOVE",vi:!0,Ci:!0},{cs:"USE l TO FIRE YOUR SHOTGUN",Ci:!0},{cs:"USE r TO RELOAD",vi:!0},{cs:"BE CAREFUL OUT THERE, WE NEED THOSE PAGES BACK!",zi:!0},{cs:"STABGUTS! LOOK OUT FOR THE POINTY END.",zi:!0},{cs:"SPINDOCTORS! YOU'LL GET MORE THAN A HAIRCUT FROM THOSE THINGS.",zi:!0},{cs:"DON'T FORGET, PICK UP LOST PAGES TO RECOVER SOME HEALTH!",zi:!0}];const xt={Oi(){if(!wt.R&&!wt.H&&!wt.Ot)for(let t=0;t<Ot.Yi.length;t++)if(wt.pi[t]&&!wt.Qi[t])return void wt.ns.push(new Ot(t))}},Tt={li(){let t=f.t,i=wt.k,s=f.i.s-wt.A.M.x,h=f.i.h-wt.A.M.y,e=0,l=i.L,r=0,n=i.w;wt.H?(e=wt.H.G.r,l=e+wt.H.G.L,r=wt.H.G.u,n=r+wt.H.G.w,f.t.fillStyle=b(10,10,10,1),f.o()):f.t.drawImage(R.$._,-16-wt.A.M.x%32,-8-wt.A.M.y%32);for(let o=e;o<l;o++)for(let e=r;e<n;e++){let l=32*e+s,r=32*o+h;if(l<-50||r<-50||l>500||r>500)continue;let n=R.I[i.k[o][e]?1:0];t.drawImage(n._,l,r)}for(let o=e;o<l;o++)for(let e=r;e<n;e++){let l=32*e+s,r=32*o+h;if(l<-50||r<-50||l>500||r>500)continue;let n=[[0,0,36,4,l-2,r-2,36,4],[32,0,4,36,l+30,r-2,4,36],[0,32,36,4,l-2,r+30,36,4],[0,0,4,36,l-2,r-2,4,36]];for(let s=0;s<4;s++)i.g[o][e]&1<<s&&t.drawImage(R.g._,...n[s]);if(wt.H)for(let s=0;s<4;s++)i.g[o][e]&16<<s&&t.drawImage(R.it._,...n[s])}if(!wt.H)for(let t of Object.values(i.qt))if(t.Kt>=3&&!wt.Vi[t.Kt]){let i=T({x:32*(t.u+t.w/2),y:32*(t.r+t.L/2)});f.t.globalAlpha=1-wt.rs%30/30,Z.Yt(f.t,"!",i.s-4,i.h-10,4,Z.red,Z.jt),f.t.globalAlpha=1}}},wt=new class{e(){R.j(()=>{f.e(),R.e(),Z.e(),z.e(),k.e(),this.k=J.Vt(),this.ns=[],this.pi={},this.Qi={},this.Vi={},this.Xi=0,this.ti=[],this.K=new ut,this.ns.push(this.K),this.A={M:{...this.K.M}},window.addEventListener("blur",()=>this.ss()),window.addEventListener("focus",()=>this.hs()),this.start()})}start(){this.rs=0,this._i(),window.requestAnimationFrame(()=>this.Zi(1))}Zi(t){this.rs++,f.c(),this._i(),this.li(f.t),window.requestAnimationFrame(()=>this.Zi(t))}_i(){if(z._i(),this.Ms)return;k._i();for(let t of wt.ns)t.ii&&t.ii();yt.Oi(this.ns),At.Oi(this.ns),xt.Oi(),Mt.Oi(),nt.Oi(),this.ns=this.ns.filter(t=>!t.si);let t=this.K.M.x-this.A.M.x,i=this.K.M.y-this.A.M.y;this.A.M.x+=.2*t,this.A.M.y+=.2*i,this.ti=this.ti.filter(t=>t._i()),wt.rs%6==0&&(this.Xi=10*Math.random()|0),30===wt.rs&&wt.ti.push(new _(20,20,20)),z.es[z.lt.Nt]&&!wt.Pi&&(wt.Pi=!0)}li(){f.t.setTransform(1,0,0,1,0,0),f.t.scale(f.scale,f.scale);let i=0,s=0;this.ti.forEach(t=>{i+=t.x,s+=t.y}),f.t.translate(i,s),Tt.li();for(let t of this.ns)(!t.z||t.z<100)&&t.li();f.t.drawImage(R.tt._,0,0,500,500,-this.Xi,-this.Xi,f.width+2*this.Xi,f.height+2*this.Xi),ot.li();for(let t of this.ns)t.z&&t.z>100&&t.li();if(wt.rs<120&&(f.t.fillStyle=b(0,0,0,1-wt.rs/120),f.o()),wt.rs>=30&&!wt.Pi&&Z.Yt(f.t,t,f.i.s-Z.zt(t,3)/2,f.i.h,3,Z.It,Z.red),wt.Ot){f.t.fillStyle=b(240,0,0,E(nt.rs/1800,0,.7)),f.o();let t="WAIT! THE PORTAL HOME... \n \nIT STINKS LIKE ROTTEN MEAT, BUT IT LOOKS LIKE YOU ARE STUCK IN THE DUNGEONS. \n \nWELCOME HOME...";Z.Jt(f.t,L(t,nt.rs,600),40,40,f.width-80,f.t.height-80,2,Z.It,Z.red)}}ss(){this.Ms||(this.Ms=!0,k.ss())}hs(){this.Ms&&(this.Ms=!1,k.hs())}};wt.e()}();</script>