<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gavin's Games</title>
    <link rel="stylesheet" href="data/styles.css">
    <style>
        body.grid-background {
            background-repeat: repeat;
        }
        body.full-background {
            background-repeat: no-repeat;
            background-size: cover;
        }
    </style>
</head>
<body>
    <div id="menuScreen">
        <h1 id="title">GavinsGames</h1>
        <p id="version" class="smashed">V2</p>
        <button id="englishButton">English</button>
        <button id="spanishButton">Espa√±ol</button>
        <p id="welcomeMessage" style="display:none;"></p>
        <p id="disclaimerMessage" style="display:none;"></p>
        <button id="startButton" style="display:none;">Start</button>
    </div>

    <header id="mainContent" style="display:none;">
        <h1>Gavin's Games</h1>
        <div class="nav-links">
            <a class="nav-link" href="OPEN%20WEBSITE%20HERE.html">Home</a>
            <a class="nav-link" href="data/other_games.html">Other Games</a>
            <a class="nav-link" href="data/help.html">Help & Support</a>
            <a class="nav-link" href="data/tools.html">Tools</a>
            <a class="nav-link" href="data/emulators.html">Emulators</a>
        </div>
    </header>
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="Search...">
        <select id="sortOptions">
            <option value="default">Default Order</option>
            <option value="name-asc">A-Z</option>
            <option value="name-desc">Z-A</option>
        </select>
    </div>
    <div class="container" id="gridContainer">
        <!-- Game items here... -->
        <div class="grid-item" data-name="SuperMario64">
            <a href="data/games/Favorite%20Games/SuperMario64/SuperMario64.html" target="_blank">
                <img src="data/games/Favorite%20Games/SuperMario64/SuperMario64Image.jpg" alt="Super Mario 64">
                <p>Super Mario 64</p>
            </a>
        </div>
        <div class="grid-item" data-name="Sandboxels">
            <a href="data/games/Favorite%20Games/sandboxels/sandboxels.html" target="_blank">
                <img src="data/games/Favorite%20Games/sandboxels/sandboxels.jpg" alt="sandboxels">
                <p>Sandboxels</p>
            </a>
        </div>
        <div class="grid-item" data-name="Madalin Stunt Cars 2">
            <a href="data/games/Favorite%20Games/madalinstuntcars/madalinstuntcars.html" target="_blank">
                <img src="data/games/Favorite%20Games/madalinstuntcars/madalinstuntcarsimage.jpg" alt="Madalin Stunt Cars 2">
                <p>Madalin Stunt Cars 2</p>
            </a>
        </div>
        <div class="grid-item" data-name="N-GON">
            <a href="data/games/Favorite%20Games/NGONV1/NGON.html" target="_blank">
                <img src="data/games/Favorite%20Games/NGONV1/bot.png" alt="N-GON">
                <p>N-GON</p>
            </a>
        </div>
        <div class="grid-item" data-name="FNAF 1">
            <a href="data/games/Favorite%20Games/Fnaf1/Fnaf1.html" target="_blank">
                <img src="data/games/Favorite%20Games/Fnaf1/Fnaf1.jpg" alt="FNAF 1">
                <p>FNAF 1</p>
            </a>
        </div>
        <div class="grid-item" data-name="FNAF 2">
            <a href="data/games/Favorite%20Games/fnaf2/fnaf2.html" target="_blank">
                <img src="data/games/Favorite%20Games/fnaf2/fnaf2.jpg" alt="FNAF 2">
                <p>FNAF 2</p>
            </a>
        </div>
        <div class="grid-item" data-name="FNAF 3 (doesn't save)">
            <a href="data/games/Favorite%20Games/Fnaf3/fnaf3.html" target="_blank">
                <img src="data/games/Favorite%20Games/Fnaf3/fnaf3.jpg" alt="FNAF 3 (doesn't save)">
                <p>FNAF 3 (doesn't save)</p>
            </a>
        </div>
        <div class="grid-item" data-name="Fnaf 4 (doesn't save)">
            <a href="data/games/Favorite%20Games/Fnaf4/fnaf4.html" target="_blank">
                <img src="data/games/Favorite%20Games/Fnaf4/fnaf4.jpg" alt="Fnaf 4 (doesn't save)">
                <p>Fnaf 4 (doesn't save)</p>
            </a>
        </div>
        <div class="grid-item" data-name="Fnaf 5 / Sister Location">
            <a href="data/games/Favorite%20Games/Fnaf5/fnaf5.html" target="_blank">
                <img src="data/games/Favorite%20Games/Fnaf5/fnaf5.png" alt="Fnaf 5">
                <p>Fnaf 5 / Sister Location</p>
            </a>
        </div>
        <div class="grid-item" data-name="Five Night's at Winstons">
            <a href="data/games/Favorite%20Games/FNAW/FNAW.html" target="_blank">
                <img src="data/games/Favorite%20Games/FNAW/FNAW.jpg" alt="Five Night's at Winstons">
                <p>Five Night's at Winstons</p>
            </a>
        </div>
        <div class="grid-item" data-name="Pizzeria Simulator (Buggy + no save)">
            <a href="data/games/Favorite%20Games/pizzeriasim/pizzeriasim.html" target="_blank">
                <img src="data/games/Favorite%20Games/pizzeriasim/pizzeriasim.jpg" alt="Pizzeria Simulator (Buggy + no save)">
                <p>Pizzeria Simulator (Buggy + no save)</p>
            </a>
        </div>
        <div class="grid-item" data-name="FNAC 2">
            <a href="data/games/Favorite%20Games/fnac2/fnac2.html" target="_blank">
                <img src="data/games/Favorite%20Games/fnac2/fnac2.jpg" alt="FNAC 2">
                <p>FNAC 2</p>
            </a>
        </div>
        <div class="grid-item" data-name="Potato Minecraft">
            <a href="data/games/Favorite%20Games/PotatoMinecraft/potatominecraft.html" target="_blank">
                <img src="data/games/Favorite%20Games/PotatoMinecraft/potatominecraft.png" alt="Potato Minecraft">
                <p>Potato Minecraft</p>
            </a>
        </div>
        <div class="grid-item" data-name="Paper Minecraft">
            <a href="data/games/Favorite%20Games/PaperMinecraft/PaperMinecraft.html" target="_blank">
                <img src="data/games/Favorite%20Games/PaperMinecraft/PaperMinecraft.png" alt="Paper Minecraft">
                <p>Paper Minecraft</p>
            </a>
        </div>
        <div class="grid-item" data-name="Minecraft 1.3">
            <a href="data/games/Favorite%20Games/minecraft13/MC13.html" target="_blank">
                <img src="data/games/Favorite%20Games/minecraft13/MC13.png" alt="Minecraft 1.3">
                <p>Minecraft 1.3</p>
            </a>
        </div>
        <div class="grid-item" data-name="Minecraft 1.5">
            <a href="data/games/Favorite%20Games/minecraft15/MC15.html" target="_blank">
                <img src="data/games/Favorite%20Games/minecraft15/MC15.png" alt="Minecraft 1.5">
                <p>Minecraft 1.5</p>
            </a>
        </div>
        <div class="grid-item" data-name="Minecraft 1.8">
            <a href="data/games/Favorite%20Games/minecraft18/MC18.html" target="_blank">
                <img src="data/games/Favorite%20Games/minecraft18/MC18.png" alt="Minecraft 1.8">
                <p>Minecraft 1.8</p>
            </a>
        </div>
        <div class="grid-item" data-name="Dante">
            <a href="data/games/Favorite%20Games/dante/dante.html" target="_blank">
                <img src="data/games/Favorite%20Games/dante/dante.jpg" alt="Dante">
                <p>Dante</p>
            </a>
        </div>
        <div class="grid-item" data-name="Doom Remake">
            <a href="data/games/Favorite%20Games/Doom%20Remake%203D/doom.html" target="_blank">
                <img src="data/games/Favorite%20Games/Doom%20Remake%203D/doom.png" alt="Doom Remake 3D">
                <p>Doom Remake</p>
            </a>
        </div>
        <div class="grid-item" data-name="Slope">
            <a href="data/games/Favorite%20Games/slope/slope.html" target="_blank">
                <img src="data/games/Favorite%20Games/slope/slope.jpg" alt="Slope">
                <p>Slope</p>
            </a>
        </div>
        <div class="grid-item" data-name="Hole.io">
            <a href="data/games/Favorite%20Games/holeio/holeio.html" target="_blank">
                <img src="data/games/Favorite%20Games/holeio/holeio.jpg" alt="Hole.io">
                <p>Hole.io</p>
            </a>
        </div>
        <div class="grid-item" data-name="Tetris">
            <a href="data/games/Favorite%20Games/g/tetris.html" target="_blank">
                <img src="data/games/Favorite%20Games/g/images/tetris.png" alt="Tetris">
                <p>Tetris</p>
            </a>
        </div>
        <div class="grid-item" data-name="Paper.io 2">
            <a href="data/games/Favorite%20Games/paperio/paperio.html" target="_blank">
                <img src="data/games/Favorite%20Games/paperio/paperio.png" alt="Paper.io 2">
                <p>Paper.io 2</p>
            </a>
        </div>
        <div class="grid-item" data-name="Super Mario Maker Bootleg">
            <a href="data/games/Favorite%20Games/supermariomaker/supermariomaker.html" target="_blank">
                <img src="data/games/Favorite%20Games/supermariomaker/Theme/Mario.gif" alt="Super Mario Maker Bootleg">
                <p>Super Mario Maker Bootleg</p>
            </a>
        </div>
        <div class="grid-item" data-name="Bloons Tower Defense 5">
            <a href="data/games/Favorite%20Games/g/bloonstowerdefense5.html" target="_blank">
                <img src="data/games/Favorite%20Games/g/images/bloonstd5.png" alt="Bloons Tower Defense 5">
                <p>Bloons Tower Defense 5</p>
            </a>
        </div>
        <div class="grid-item" data-name="The Impossible Quiz">
            <a href="data/games/Favorite%20Games/g/theimpossiblequiz.html" target="_blank">
                <img src="data/games/Favorite%20Games/g/images/theimpossiblequiz.png" alt="The Impossible Quiz">
                <p>The Impossible Quiz</p>
            </a>
        </div>
        <div class="grid-item" data-name="Stealing The Diamond">
            <a href="data/games/Favorite%20Games/g/stealingthediamond.html" target="_blank">
                <img src="data/games/Favorite%20Games/g/images/stealingthediamond.png" alt="Stealing The Diamond">
                <p>Stealing the Diamond</p>
            </a>
        </div>
        <div class="grid-item" data-name="Infiltrating The Airship">
            <a href="data/games/Favorite%20Games/g/infiltratingtheairship.html" target="_blank">
                <img src="data/games/Favorite%20Games/g/images/infiltratingtheairship.png" alt="Infiltrating The Airship">
                <p>Infiltrating The Airship</p>
            </a>
        </div>
        <div class="grid-item" data-name="breakingthebank">
            <a href="data/games/Favorite%20Games/g/breakingthebank.html" target="_blank">
                <img src="data/games/Favorite%20Games/g/images/breakingthebank.png" alt="Breaking The Bank">
                <p>Breaking The Bank</p>
            </a>
        </div>
        <div class="grid-item" data-name="Escaping The Prison">
            <a href="data/games/Favorite%20Games/g/escapingtheprison.html" target="_blank">
                <img src="data/games/Favorite%20Games/g/images/escapingtheprison.png" alt="Escaping the Prison">
                <p>Escaping The Prison</p>
            </a>
        </div>
        <div class="grid-item" data-name="Fleeing The Complex">
            <a href="data/games/Favorite%20Games/g/fleeingthecomplex.html" target="_blank">
                <img src="data/games/Favorite%20Games/g/images/fleeingthecomplex.png" alt="Fleeing The Complex">
                <p>Fleeing The Complex</p>
            </a>
        </div>
        <div class="grid-item" data-name="jetpack">
            <a href="data/games/other%20games/jetpack/jetpack.html" target="_blank">
                <img src="data/games/other%20games/jetpack/jetpack.png" alt="jetpack">
                <p>Jet Pack</p>
            </a>
        </div>
        <div class="grid-item" data-name="ISLAND NOT FOUND">
            <a href="data/games/Favorite%20Games/ISLANDNOTFOUND/ISLANDNOTFOUND.html" target="_blank">
                <img src="data/games/Favorite%20Games/ISLANDNOTFOUND/ISLANDNOTFOUND.png" alt="Island Not Found">
                <p>Island Not Found</p>
            </a>
        </div>
        <div class="grid-item" data-name="Zombie Burger">
            <a href="data/games/Favorite%20Games/zombieburger/zombieburger.html" target="_blank">
                <img src="data/games/Favorite%20Games/zombieburger/zombieburger.png" alt="Zombie Burger">
                <p>Zombie Burger</p>
            </a>
        </div>
        <div class="grid-item" data-name="NGON V2">
            <a href="data/games/Favorite%20Games/NGONV2/NGONV2.html" target="_blank">
                <img src="data/games/Favorite%20Games/NGONV2/NGONV2.png" alt="NGON V2">
                <p>NGON V2</p>
            </a>
        </div>
        <div class="grid-item" data-name="Mini Punk">
            <a href="data/games/Favorite%20Games/minipunk/minipunk.html" target="_blank">
                <img src="data/games/Favorite%20Games/minipunk/minipunk.png" alt="Mini Punk">
                <p>Mini Punk</p>
            </a>
        </div>
    <div class="grid-item" data-name="OSU">
        <a href="data/games/Favorite%20Games/OSU/OSU.html" target="_blank">
            <img src="data/games/Favorite%20Games/OSU/OSU.png" alt="OSU">
            <p>OSU</p>
        </a>
    </div>  
    <div class="grid-item" data-name="Terraria">
        <a href="data/games/Favorite%20Games/terraria/Terraria.html" target="_blank">
            <img src="data/games/Favorite%20Games/terraria/terraria.png" alt="Terraria">
            <p>Terraria</p>
        </a>
    </div>  
    <div class="grid-item" data-name="The Mast">
        <a href="data/games/Favorite%20Games/themast/themast.html" target="_blank">
            <img src="data/games/Favorite%20Games/themast/themast.png" alt="The Mast">
            <p>The Mast</p>
        </a>
    </div>
<div class="grid-item" data-name="2D Physics Engine">
    <a href="data/games/Favorite%20Games/2DPhysicsengine/2DPHYSICSENGINE.html" target="_blank">
        <img src="data/games/Favorite%20Games/2DPhysicsengine/2DPHYSICSENGINE.png" alt="2D Phsics Engine">
        <p>2D Physics Engine</p>
    </a>
</div>
<div class="grid-item" data-name="Sans Final Battle Undertale">
    <a href="data/games/Favorite%20Games/sansfinalbattle/Sansfinalbattle.html" target="_blank">
        <img src="data/games/Favorite%20Games/sansfinalbattle/sans.png" alt="Sans Final Battle">
        <p>Sans Final Battle</p>
    </a>
</div>
<div class="grid-item" data-name="Doge Miner">
    <a href="data/games/Favorite%20Games/DogeMiner/DogeMiner.html" target="_blank">
        <img src="data/games/Favorite%20Games/DogeMiner/DogeMiner.png" alt="Doge Miner">
        <p>Doge Miner</p>
    </a>
</div>
<button id="settingsButton"></button>
<div id="settingsPanel">
    <div class="settings-header">Settings</div>
    <div class="theme-option">
        <h3>Select Theme</h3>
        <button onclick="setTheme('dark')">Dark Mode</button>
        <button onclick="setTheme('light')">Light Mode</button>
    </div>
    <div class="theme-option">
        <h3>Custom Themes</h3>
        <div id="customThemes">
            <div class="save-file">
                <button class="circle-button" onclick="selectCustomTheme(1)" id="customTheme1Select"></button>
                <input type="text" placeholder="Custom Theme 1" id="customTheme1Name" onchange="saveCustomThemeName(1)">
                <button onclick="saveCustomTheme(1)" id="customTheme1Save">Save</button>
                <button onclick="deleteCustomTheme(1)" id="customTheme1Delete">Delete</button>
            </div>
            <div class="save-file">
                <button class="circle-button" onclick="selectCustomTheme(2)" id="customTheme2Select"></button>
                <input type="text" placeholder="Custom Theme 2" id="customTheme2Name" onchange="saveCustomThemeName(2)">
                <button onclick="saveCustomTheme(2)" id="customTheme2Save">Save</button>
                <button onclick="deleteCustomTheme(2)" id="customTheme2Delete">Delete</button>
            </div>
            <div class="save-file">
                <button class="circle-button" onclick="selectCustomTheme(3)" id="customTheme3Select"></button>
                <input type="text" placeholder="Custom Theme 3" id="customTheme3Name" onchange="saveCustomThemeName(3)">
                <button onclick="saveCustomTheme(3)" id="customTheme3Save">Save</button>
                <button onclick="deleteCustomTheme(3)" id="customTheme3Delete">Delete</button>
            </div>
        </div>
    </div>
    <div class="color-options">
        <h3>Customize Colors</h3>
        <div>
            <button onclick="showColorPicker('text')">Text Color</button>
            <input type="color" id="textColorPicker" class="color-picker">
        </div>
        <div>
            <button onclick="showColorPicker('primary')">Primary Color</button>
            <input type="color" id="primaryColorPicker" class="color-picker">
        </div>
        <div>
            <button onclick="showColorPicker('secondary')">Secondary Color</button>
            <input type="color" id="secondaryColorPicker" class="color-picker">
        </div>
    </div>
    <div class="background-upload">
        <h3>Upload Custom Background</h3>
        <input type="file" id="backgroundUpload" accept="image/png, image/jpeg" onchange="uploadCustomBackground()">
        <button onclick="setBackgroundStyle('grid')">Grid</button>
        <button onclick="setBackgroundStyle('full')">Full</button>
    </div>
    <p>Make sure to add the image last when designing, otherwise it will not save.</p>
    <button onclick="location.href='data/tools/drawing/gavinsoftpaint.html'">Don't have an image? Design one here!</button>
</div>
<script>
    const searchInput = document.getElementById('searchInput');
    const sortOptions = document.getElementById('sortOptions');
    const gridContainer = document.getElementById('gridContainer');
    const gridItems = Array.from(gridContainer.getElementsByClassName('grid-item'));

    searchInput.addEventListener('input', function() {
        const filter = searchInput.value.toLowerCase();
        for (const item of gridItems) {
            const name = item.getAttribute('data-name').toLowerCase();
            item.style.display = name.includes(filter) ? '' : 'none';
        }
    });

    sortOptions.addEventListener('change', function() {
        const option = sortOptions.value;
        let sortedItems;
        if (option === 'name-asc') {
            sortedItems = [...gridItems].sort((a, b) => a.getAttribute('data-name').localeCompare(b.getAttribute('data-name')));
        } else if (option === 'name-desc') {
            sortedItems = [...gridItems].sort((a, b) => b.getAttribute('data-name').localeCompare(a.getAttribute('data-name')));
        } else {
            sortedItems = gridItems; // Default order
        }
        for (const item of sortedItems) {
            gridContainer.appendChild(item);
        }
    });

    document.addEventListener("DOMContentLoaded", function() {
        const items = document.querySelectorAll('#gridContainer .grid-item');
        items.forEach((item, index) => {
            setTimeout(() => {
                item.classList.add('fade-in');
            }, index * 50); // 50ms interval between each item
        });

        // Menu screen logic
        const menuScreen = document.getElementById('menuScreen');
        const title = document.getElementById('title');
        const version = document.getElementById('version');
        const englishButton = document.getElementById('englishButton');
        const spanishButton = document.getElementById('spanishButton');
        const welcomeMessage = document.getElementById('welcomeMessage');
        const disclaimerMessage = document.getElementById('disclaimerMessage');
        const startButton = document.getElementById('startButton');
        const mainContent = document.getElementById('mainContent');
        const warningMessage = document.getElementById('warningMessage');

        if (!localStorage.getItem('isNewUser')) {
            localStorage.setItem('isNewUser', 'false');
            menuScreen.style.display = 'flex';

            englishButton.addEventListener('click', function() {
                englishButton.classList.add('slide-middle');
                spanishButton.classList.add('fade-out');
                setTimeout(() => {
                    englishButton.style.transform = 'translateX(0)';
                    spanishButton.style.opacity = '0';
                }, 1500);
                setTimeout(() => {
                    welcomeMessage.textContent = "Welcome to my game website! I am thrilled to have you here as a user, so you can enjoy all the games I have given to you. Enjoy the new features, new games, and more!        I AM NOT RESPONSIBLE IF YOU GET IN TROUBLE FOR PLAYING THIS WHEN YOU ARE NOT SUPPOSED TO";
                    showWelcomeMessage();
                }, 2000); // 2 seconds delay
            });

            spanishButton.addEventListener('click', function() {
                spanishButton.classList.add('slide-middle');
                englishButton.classList.add('fade-out');
                setTimeout(() => {
                    spanishButton.style.transform = 'translateX(0)';
                    englishButton.style.opacity = '0';
                }, 1500);
                setTimeout(() => {
                    welcomeMessage.textContent = "¬°Bienvenido a mi sitio web de juegos! Estoy emocionado de tenerte aqu√≠ como usuario, para que puedas disfrutar de todos los juegos que te he dado. ¬°Disfruta de las nuevas funciones, nuevos juegos y m√°s!        NO SOY RESPONSABLE SI TE METES EN PROBLEMAS POR JUGAR ESTO CUANDO NO DEBER√çAS";
                    disclaimerMessage.textContent = "Desafortunadamente, para los hablantes de espa√±ol, el sitio web y los juegos no ser√°n traducidos. Solo este mensaje ser√° traducido, pero las im√°genes deber√≠an proporcionar suficiente detalle sobre lo que podr√≠a ser el juego. Lamentamos los inconvenientes.";
                    showWelcomeMessage();
                }, 2000); // 2 seconds delay
            });

            function showWelcomeMessage() {
                welcomeMessage.style.display = 'block';
                welcomeMessage.classList.add('fade-in');
                if (disclaimerMessage.textContent) {
                    disclaimerMessage.style.display = 'block';
                    disclaimerMessage.classList.add('fade-in');
                }
                setTimeout(() => {
                    startButton.style.display = 'block';
                    startButton.classList.add('fade-in');
                    warningMessage.style.display = 'block';
                    warningMessage.classList.add('fade-in');
                }, 5000); // 5 seconds after message appears
            }

            startButton.addEventListener('click', function() {
                menuScreen.style.display = 'none';
                mainContent.style.display = 'block';
            });
        } else {
            mainContent.style.display = 'block';
        }

        loadCustomThemeNames();
        loadTheme();
    });

    // Settings button and panel logic
    const settingsButton = document.getElementById('settingsButton');
    const settingsPanel = document.getElementById('settingsPanel');
    const textColorPicker = document.getElementById('textColorPicker');
    const primaryColorPicker = document.getElementById('primaryColorPicker');
    const secondaryColorPicker = document.getElementById('secondaryColorPicker');
    const backgroundUpload = document.getElementById('backgroundUpload');
    let currentColorTarget = '';
    let backgroundStyle = 'grid';

    settingsButton.addEventListener('click', function() {
        settingsPanel.classList.toggle('show');
    });

    function setTheme(theme) {
        if (theme === 'dark') {
            document.documentElement.style.setProperty('--text-color', 'white');
            document.documentElement.style.setProperty('--primary-color', '#1c1c1c');
            document.documentElement.style.setProperty('--secondary-color', 'black');
            document.documentElement.style.setProperty('--button-color', '#555');
            document.documentElement.style.setProperty('--text-bg-color', '#333');
            document.body.style.backgroundImage = ''; // Clear custom background
            document.body.classList.remove('grid-background', 'full-background');
        } else if (theme === 'light') {
            document.documentElement.style.setProperty('--text-color', 'black');
            document.documentElement.style.setProperty('--primary-color', 'white');
            document.documentElement.style.setProperty('--secondary-color', 'gray');
            document.documentElement.style.setProperty('--button-color', 'gray');
            document.documentElement.style.setProperty('--text-bg-color', '#f9f9f9');
            document.body.style.backgroundImage = ''; // Clear custom background
            document.body.classList.remove('grid-background', 'full-background');
        }
        localStorage.setItem('theme', theme);
        localStorage.removeItem('lastUsedCustomTheme'); // Clear the custom theme selection
        localStorage.removeItem('customBackground'); // Clear custom background selection
    }

    function saveCustomTheme(slot) {
        const customThemeName = document.getElementById(`customTheme${slot}Name`).value;
        const customTheme = {
            name: customThemeName,
            textColor: getComputedStyle(document.documentElement).getPropertyValue('--text-color'),
            primaryColor: getComputedStyle(document.documentElement).getPropertyValue('--primary-color'),
            secondaryColor: getComputedStyle(document.documentElement).getPropertyValue('--secondary-color'),
            buttonColor: getComputedStyle(document.documentElement).getPropertyValue('--button-color'),
            textBgColor: getComputedStyle(document.documentElement).getPropertyValue('--text-bg-color'),
            backgroundImage: localStorage.getItem(`customTheme${slot}Background`) || '',
            backgroundStyle: backgroundStyle
        };
        localStorage.setItem(`customTheme${slot}`, JSON.stringify(customTheme));
        localStorage.setItem(`customTheme${slot}Name`, customThemeName);
    }

    function loadCustomTheme(slot) {
        const customTheme = JSON.parse(localStorage.getItem(`customTheme${slot}`));
        if (customTheme) {
            document.documentElement.style.setProperty('--text-color', customTheme.textColor);
            document.documentElement.style.setProperty('--primary-color', customTheme.primaryColor);
            document.documentElement.style.setProperty('--secondary-color', customTheme.secondaryColor);
            document.documentElement.style.setProperty('--button-color', customTheme.buttonColor);
            document.documentElement.style.setProperty('--text-bg-color', customTheme.textBgColor);
            if (customTheme.backgroundImage) {
                document.body.style.backgroundImage = `url(${customTheme.backgroundImage})`;
                document.body.classList.toggle('grid-background', customTheme.backgroundStyle === 'grid');
                document.body.classList.toggle('full-background', customTheme.backgroundStyle === 'full');
            } else {
                document.body.style.backgroundImage = '';
                document.body.classList.remove('grid-background', 'full-background');
            }
        }
    }

    function deleteCustomTheme(slot) {
        localStorage.removeItem(`customTheme${slot}`);
        localStorage.removeItem(`customTheme${slot}Name`);
        localStorage.removeItem(`customTheme${slot}Background`);
        document.getElementById(`customTheme${slot}Name`).value = '';
        document.getElementById(`customTheme${slot}Select`).classList.remove('selected');
        localStorage.removeItem('lastUsedCustomTheme');
        setTheme('dark'); // Reset to default dark theme
    }

    function selectCustomTheme(slot) {
        document.querySelectorAll('.circle-button').forEach(btn => btn.classList.remove('selected'));
        document.getElementById(`customTheme${slot}Select`).classList.add('selected');
        loadCustomTheme(slot);
        localStorage.setItem('lastUsedCustomTheme', slot);
        localStorage.removeItem('theme'); // Clear the light/dark theme selection
    }

    function showColorPicker(target) {
        currentColorTarget = target;
        if (target === 'text') {
            textColorPicker.classList.add('show');
            primaryColorPicker.classList.remove('show');
            secondaryColorPicker.classList.remove('show');
        } else if (target === 'primary') {
            primaryColorPicker.classList.add('show');
            textColorPicker.classList.remove('show');
            secondaryColorPicker.classList.remove('show');
        } else if (target === 'secondary') {
            secondaryColorPicker.classList.add('show');
            textColorPicker.classList.remove('show');
            primaryColorPicker.classList.remove('show');
        }
    }

    textColorPicker.addEventListener('input', function() {
        const color = textColorPicker.value;
        document.documentElement.style.setProperty('--text-color', color);
    });

    primaryColorPicker.addEventListener('input', function() {
        const color = primaryColorPicker.value;
        document.documentElement.style.setProperty('--primary-color', color);
    });

    secondaryColorPicker.addEventListener('input', function() {
        const color = secondaryColorPicker.value;
        document.documentElement.style.setProperty('--secondary-color', color);
        document.documentElement.style.setProperty('--button-color', color);
        document.documentElement.style.setProperty('--text-bg-color', color);
    });

    function saveCustomThemeName(slot) {
        const customThemeName = document.getElementById(`customTheme${slot}Name`).value;
        localStorage.setItem(`customTheme${slot}Name`, customThemeName);
    }

    function loadCustomThemeNames() {
        for (let i = 1; i <= 3; i++) {
            const customThemeName = localStorage.getItem(`customTheme${i}Name`);
            if (customThemeName) {
                document.getElementById(`customTheme${i}Name`).value = customThemeName;
            }
        }
    }

    function uploadCustomBackground() {
        const file = backgroundUpload.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(event) {
                const imageUrl = event.target.result;
                const lastUsedCustomTheme = localStorage.getItem('lastUsedCustomTheme');
                if (lastUsedCustomTheme) {
                    localStorage.setItem(`customTheme${lastUsedCustomTheme}Background`, imageUrl);
                    document.body.style.backgroundImage = `url(${imageUrl})`;
                    document.body.classList.toggle('grid-background', backgroundStyle === 'grid');
                    document.body.classList.toggle('full-background', backgroundStyle === 'full');
                } else {
                    localStorage.setItem('uploadedBackground', imageUrl);
                    document.body.style.backgroundImage = `url(${imageUrl})`;
                    document.body.classList.toggle('grid-background', backgroundStyle === 'grid');
                    document.body.classList.toggle('full-background', backgroundStyle === 'full');
                }
            };
            reader.readAsDataURL(file);
        }
    }

    function setBackgroundStyle(style) {
        backgroundStyle = style;
        document.body.classList.toggle('grid-background', style === 'grid');
        document.body.classList.toggle('full-background', style === 'full');
    }

    function loadTheme() {
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            setTheme(savedTheme);
        } else {
            const lastUsedCustomTheme = localStorage.getItem('lastUsedCustomTheme');
            if (lastUsedCustomTheme) {
                loadCustomTheme(lastUsedCustomTheme);
                document.getElementById(`customTheme${lastUsedCustomTheme}Select`).classList.add('selected');
            }
        }
    }

    loadCustomThemeNames();
    loadTheme();
</script>
<div id="warningMessage" style="display:none; color:red; text-align:center; margin-top:20px;"></div>
<footer>
    Developed and Created by Gavin James Caldwell and Jayden Valeu
</footer>
